

# RookMotion Watch Link

RookMotion watch link  allows new and existing applications to integrate RookMotion functionalities for training measurement, tracking, and analysis.

RookMotion watch link  is designed with the intention to be:

* Fast Integration: Useful to integrate fast and easy using pre-created views with RookMotion design and pre-automated flows. For reference: 4h to re-create the demo app.
* Full personalization: Better for apps with a dedicated development team, developers can call each SDK function in theirs desired order and create and fill their with a personalized UI.

These functionalities are:

* User's info, workouts, rewards, and statistics management in complement with the RookMotion API.

## Keywords

| keyword      | Def |
| ----------- | ----------- |
| **Client**  | Billing account. Person or company which contracts the usage of the API. A client can have multiple centers, branches, rooms or be virtual |
| **client_key**  | Unique identifier provided by the RookMotion API account manager for each center/branch/room of the client. This is used to redirect client API request to his correspondent tenancy. |
| **Chain**  | An entity or brand operating under the same client's entity |
| **chain_uuid**  | Unique identifier for a chain entity. Cannot be created with the SDK. Chains are created directly with the API.|
| **Branch**  | A sucursal or branch of a chain entity |
| **branch_uuid**  | Unique identifier for a branch entity. Cannot be created with the SDK. Chains are created directly with the API.|
| **Room**  | A branch section or division where training is performed. This is the smallest part of the business structure. Rooms can be physical, remote or virtual.  |
| **room_uuid**  | Unique identifier for a branch entity. Cannot be created with the SDK. Chains are created directly with the API.|
| **token_level**  | Unique identifier for each entity of the business structure. Each API request requires a token_level which allows the API to identify the entity where the request/query should be performed. token_level's are created by the API when a chain or branch or room is created. |
| **User**  | A person which uses the RookMotion API through the client APP to perform trainings. |
| **user_uuid**  | Unique identifier for each user, it's generated by the RookMotion API for each user added with API.addUser.|
| **Sensor**  | A Bluetooth peripheral device with a training variable measurement such as heart rate.    |
| **sensor_uuid**  | Unique identifier for each training sensor, it's generated by the RookMotion API for each sensor added to the user with API.addSensor.|
| **Training**  | Routine or workout perfomed using a heart rate sensor where the measurement records are obtained, stored and proccessed using the RookMotion SDK/API.|
| **training_uuid**  | Unique identifier for each training, it's generated by the RookMotion API for each training added to the user with API.addTraining.|

## Contents

1. [Installation](#user-content-installation)
2. [Configuration](#user-content-configuration)
3. [Package usage](#user-content-package-usage)
    * [RWCommunicationManager class](#user-content-rwcommunicationmanager-class)
     * [AuthorizationManager](#user-content-authorizationmanager)
    * [WorkoutManager](#user-content-workoutmanager)
    * [Repository classes](#user-content-repository-classes)
        * [Repository Training Types](#user-content-repository-training-types)
        * [Repository Training](#user-content-repository-training)
    * [NetworkManager](#user-content-networkmanager)
        * [RWUserAPI](#user-content-rwuserapi)
        * [RWTrainingAPI](#user-content-rwtrainingapi)
        * [RWTrainingTypeAPI](#user-content-rwtrainingtypeapi)
        * [RWSensorAPI](#user-content-rwsensorapi)
        * [RWRealTimeAPI](#user-content-rwrealtimeapi)
    * [RWStorageManager class](#user-content-rwstoragemanager-class)
    * [BackGroundTasks](#user-content-backgroundtask)
    * [RWModels](#user-content-rmmodels)


## Installation ##

### required software

To build a project using the RookMotion SDK you need to download and install
* [Xcode](https://developer.apple.com/xcode/) version 12.4 or later.
* [Cocoapods](https://guides.cocoapods.org/using/getting-started.html)

The watch OS deployment minimum target is 6.2 and the swift version is 5.0.

RookMotionLink is available through CocoaPods. To install it, simply follow the next steps:

1. Creat a Podfile.

```console
pod init
```

2. Open your Podfile

```console
open .Podfile -a xcode
```

3. Add the following line to your Podfile in your watchKit extension

```Ruby
    pod 'RookMotionWatchLink', :git => ""
```

4. Add the following lines at the end of the Podfile

```Ruby
post_install do |installer|
    installer.pods_project.targets.each **do** |target|
        target.build_configurations.each **do** |config|
            config.build_settings['BUILD_LIBRARY_FOR_DISTRIBUTION'] = 'YES'
            config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '13.0'
            config.build_settings['WATCHOS_DEPLOYMENT_TARGET'] = '6.2'
        end
    end
end
```

4. run pod install

```console
pod install
```

## Configuration ##

Add your client_key and your token_level to your ```ExtensionDelegate.swift``` as follows:

* Import RookMotionWatchLink statement:

```swift
import RookMotionWatchLink
```

* Add the following lines to your ```applicationDidFinishLaunching()``` method, replacing *YOUR_KEY* and *YOUR_TOKEN* with your credential:

* The developer can set the `urlBase` to sandbox environment or production environment.

* The developer can set the `urlRemote` to sandbox environment or production environment for remote trainings.


```swift
func  applicationDidFinishLaunching() {
        let clientKey = "YOUR_KEY"
        let tokenLevel = "YOUR_TOKEN"
                let urlBase = "YOUR_BASE_URL"
                let urlRemote = "YOUR_REMOTE_URL"

        RMSettings.shared.setCredentials(client_key: clientKey, token: tokenLevel)
        RMSettings.shared.setUrlApi(with: urlBase)
        RMSettings.shared.setUrlRemote(with: urlRemote)
        RMSettings.shared.initRookMotionSDK()
    }
```
Before to use all the classes and method the following permissions have to be in the Info.plist file.

| Key | Type | String |
| ---- | ------ | ---- |
| Privacy - Health Share Usage Description | String | Allow Bluetooth access to connect with your training sensors devices.|
| Privacy - Health Update Usage Description | String | Allow Bluetooth access to connect with your training sensors devices. |

**Note: It is important that: `Workout processing` option is enabled in Background Mode.
and HealthKit has to be added**

## Package usage

###  RWCommunicationManager class

```swift
public class RWCommunicationManager
```

The `RWCommunicationManager` class allows the watch app communicate with the iOS companion app.

Your iOS app and watchOS app must both create and configure an instance of this class at some point during their execution

The CommunicationManager must be configured and activated before you attempt to send messages or obtain information about the state of the connection.

| Returns      | Function |
| ----------- | ----------- |
|```void```      | ```configureSession()``` |
|```void``` | ```sendInfo(_ info: [String: Any])``` |


#### configureSession()
```swift
public func configureSession()
```
Configure the communication session with the iOS app

#### sendInfo()
```swift
public func sendInfo(_ info: [String: Any])
```
Sends the specified data dictionary to the counterpart.

Call this method when you want to send a dictionary of data to the counterpart and ensure that it’s delivered. Dictionaries sent using this method are queued on the other device and delivered in the order in which they were sent. After a transfer begins, the transfer operation continues even if the app is suspended.

##### Example
```swift
let communicationManager  = RWCommunicationManager.shared
sensorManager.configureSession()
let info = ["sync": "info"]
sensorManager.sendInfo(info)
```

### Delegate

You must assign an object conforming to the RWCommunicationDelegate protocol to this. The delegate is responsible for responding to session-related changes, for processing incoming data, and for responding to errors.

#### RWCommunicationDelegate

A set of methods that provide the data related to the connection information

```swift
public protocol RWCommunicationDelegate
```

|Function| Description|
|-------|------------|
|```session(_ session: WCSession, messageData: [String : Any])```|Tells the delegate when a message has been received. |
|```session(_ session: WCSession, userInfo: [String : Any])``` |Tells the delegate when a dictionary has been received.|
|```session(_ session: WCSession, message: [String : Any])```| Tells the delegate when a message has been received. |
|```userInfoSaved(_ session: WCSession, watchMessage: [String: Any])```| Tells the delegate when a new user information has been received and stored. |



### AuthorizationManager

```swift
public class  AuthorizationManager: NSObject
```
This class was created to requests permission to save and read the specified data that will be used to store the workouts.

**Warning. You must request the permission before start a workout and the user should allow them to enable the reading data**

#### Methods

| Returns      | Function |
| ----------- | ----------- |
| void | ```requestAuthorization(completionHandler: @escaping((_ success: Bool) -> Void))``` |

#### requestAuthorization()
```swift
public func requestAuthorization(completionHandler: @escaping((_ success: Bool) -> Void))
```
AuthorizationManager performs these requests asynchronously. If you call this method  a type of data that the user hasn’t previously granted or denied permission for in this app, the system automatically displays the permission form, listing all the requested permissions. After the user has finished responding, this method calls its completion block on a background queue. If the user has already chosen to grant or prohibit access to all of the types specified, HealthKit calls the completion without prompting the user.

### WorkoutManager

```swift
public class  WorkoutManager: NSObject
```
The workout class provides automated methods to perform a workout, this class collects all the data of a training and uploads all the information to the server.

#### Properties

| Name | Type | Description |
| ---- | ---- | ----------- |
| delegate | ```WorkoutManagerDelegate``` | The delegate receives notifications when a workout session’s state changes or when a workout session fails. |
| state | ```WorkoutState``` |  This property indicates the current state of a workout |
| training | ```RWTrainingInfo``` | This model object of realm contains all the data of a training |
| remoteClass | ```RWRemoteClass``` | This model contains all the information to connect a remote class |
| duration | ```Float``` | The number of seconds of the training duration |

#### Methods

| Returns      | Function |
| ----------- | ----------- |
| ```void``` | ```start(configuration: WorkoutConfiguration?)``` |
| `void` | `pauseWorkout()` |
| `void` | `resumenWorkOut()` |
| `void` | `stop()` |
| `void` | `configureRemote(with remoteClass: RemoteClass)` |
| `void` | `restoreWorkout(with pendingTraining: RWTrainingInfo)`|

#### start()
```swift
public func start(configuration: WorkoutConfiguration?)
```

This method configures the workout with the `WorkoutConfiguration` object given, starts the activity and collect all the data of the session.

#### pauseWorkout()

```swift
public func pauseWorkout()
```

This method allows the user to pause a workout session.

#### resumenWorkout

```swift
public func resumenWorkOut()
```

It resumes a workout sessions that has been paused.

#### stop()

```swift
public func stop()
```

This method finish a workout all the information will be send to the rookmotion web server the training will be associate to the user stored in the local data base.

#### configureRemote()

```swift
public func configureRemote(with remoteClass: RemoteClass)
```

When you want to send a realtime information this method allows to send all de data to the remote class configured.

**Note: Its important to request access to the remote classes before use this method**

#### restoreWorkout()

```swift 
public func restoreWorkout(with pendingTraining: RWTrainingInfo)
```

In case a user kills the app while a training is running, this method allows to recover all the data stored of the training.

#### Notifications

The following notification are used to handle al the data coming from the measurements. 

use the `NotificationCenter` to add or remove a notification. 

| Name | Returns | Description |
| ------- | --------- | ------- |
| `kWorkoutDuration` | `["duration": Float]` | The notification returns a dictionary with the number of seconds in a workout, it updates every second. |
| `kTrainingPlayNotification` | `nil` | The notification indicates when a remote class whit waiting time room has started. |
| `kWorkoutHearRateData` | `["timeStamp": String, "heartRate" : Int, "calories" : Float, "effort" : Float, "heartRateVariability" : Int]`| Returns a dictionary with all the data from a heart rate sample this dictionary can be decoded with `RMHrDerivedRecord` object. |
| `kWorkoutStepData` | `["timestamp": String, "cadence": Float, "steps" : Int]` |  Returns a dictionary with all the data from a step sample this dictionary can be decoded with `RMStepDerivedRecord` object. |
| `kWorkoutFinish` | `nil` | The notification indicates when a remote workout has finished. |
| `kRemoteBadConnection` | `nil` | The notification indicates when the the remote data could not be upload due to bad internet connection |
| `kRemoteDataSended` | `nil` | The notification indicates when the real time data has been upload.  |

### Repository classes

These classes encapsulate the access data sources of workout types, user indexes and trainings.

### RepositoryTrainingTypes

This class allows the access to the training types if the trainings types are stored in the local data base and there is not internet connection the user is able to get those training types.

#### Methods

| Returns  | Function |
| ----------- | ----------- |
| `[WorkoutType]` | `getTrainingTypes(completion: @escaping([WorkoutType])` |
| `[RemoteClass]` | `getRemoteClasses(completion: @escaping([RemoteClass])` |

#### getTrainingTypes()

```swift
public func getTrainingTypes(completion: @escaping([WorkoutType]) -> Void)
```

This method retrieves a list of WorkoutType objects if there is no internet connection, it will return the workout types stored in the local data base.

#### getRemoteClasses()

```swift 
public func getRemoteClasses(completion: @escaping([RemoteClass]) -> Void)
```

This method retrieves in the completion a list of `RemoteClass`objects which contains the information of all remote classes available for the user stored in the local data base

### RepositoryTraining

This class allows to store, retrieve and upload sensors and trainings.

| Returns      | Function |
| ----------- | ----------- |
| `RMResponse` | `addSensor(sensor: RMSensorAPI, completion: @escaping (RMResponse) -> Void)` |
| `RMResponse` | `createSensor(completion: @escaping(RMResponse)` |
| `RMResponse` | `uploadPendingSensors(completion: @escaping (RMResponse) -> Void)` |
| `(RMResponse,[RMSensorAPI])` | `getUserSensors(completion: @escaping (RMResponse,[RMSensorAPI]?) -> Void)` |
| `RMResponse` | `uploadPendingTrainings(delete: Bool, completion: @escaping (RMResponse) -> Void)` |

#### addSensor()

```swift
public func addSensor(sensor: RMSensorAPI,
                      completion: @escaping (RMResponse) -> Void
```

The method adds a RMSensorAPI object to the local data base and uploads that object to the web server this sensor is linked to the user stored in the local data base.

#### createSensor()

```swift
public func createSensor(completion: @escaping(RMResponse) -> Void)
```

Creates a sensor with the apple watch name it will be stored in the local data base and uploads to the web server.

#### uploadPendingSensors()

```swift
public func uploadPendingSensors(completion: @escaping (RMResponse) -> Void)
```

Uploads to the server all the sensors stored in the local data base.

#### getUserSensors() 

```swift
public func getUserSensors(completion: @escaping (RMResponse,[RMSensorAPI]?) -> Void)
```

Retrieves a list of `RMSensorAPI` objects from the web server if there is no internet connection retrieves the list stored in the local data base.

#### uploadPendingTrainings()

```swift
public func  uploadPendingTrainings(delete: Bool,completion: @escaping (RMResponse) -> Void)
```

The method uploads all the training stored in the local data base, if the `delete` input is set with true, the trainings stored will be deleted after the upload.

###  NetworkManager

```swift
public  struct  NetworkManager<T: EndPointType>
```
This struct is a layer that gives access to store or retrieve data from the web server, It is divided in four sublayers.

1. [RWTrainingAPI](#user-content-training-api)
2. [RWTrainingTypeAPI](#user-content-training-type-api)
3. [RWSensorAPI](#user-content-sensor-api)
4. [RWRealTimeApi](#user-content-realtime-api)

###  Training api

This extension of the layer allows to upload trainings to the web server.

```swift
extension  RWTrainingAPI: EndPointType
```

| Function      | Description |
| ----------- | ----------- |
| `public func addPendingTrainingToUser(userUUID: String, userToken: String? = nil, training: RWTrainingInfo, completion: @escaping(Int, String?, _ error: String?) -> Void)` | Uploads a training to the web server this workout will be linked to user uuid provided. |

#### addPendingTrainingToUser() 
```swift
public func addPendingTrainingToUser(userUUID: String, userToken: String? = nil,
                                     training: RWTrainingInfo,
                                      completion: @escaping(Int, String?, _ error: String?) -> Void)
```

Uploads a training to the web server this workout will be linked to user uuid provided.

##### Example
```swift
let networkManager = NetworkManager<RWTrainingAPI>()
let training = RWTrainingInfo()
let userUuid = "fief-2dwd2-222dd"

networkManager.addPendingTrainingToUser(userUUID: userUuid, training: training) { (httpCode, response, error) in
    print(httpCode)
    
}
```

### TrainingTypeAPI

The extension of the layer provides the method to get a list of workout types.

```swift
extension  RWTrainingTypeAPI: EndPointType
```

| Function    | Description |
| ----------- | ----------- |
| ```getTrainingTypes(userToken: String? = nil, completion: @escaping([RWTrainingType]?, _ error: String?) -> Void)``` | Retrieves a list of `RWTrainingType`  objects. |

##### Example
```swift
let networkManager = NetworkManager<RWTrainingTypeAPI>()

networkManager.getTrainingTypes() { (trainingTypes, error) in
    print("Debug trainings \(trainingTypes)")
}
```

### RWSensorAPI

```swift
extension RWSensorAPI: EndPointType
```

| Function      | Description |
| ----------- | ----------- |
| ```addSesnorToUser(tokenUser: String? = nil, sensor_name: String,sensor_mac: String, ownership_type: String, userUUID: String, completion: @escaping(Int, String?, _ error: String?) -> Void)``` | The method adds a sensor to a user it will be stored in the web server
| `getUserSensor(userUUID: String, userToken: String? = nil, completion: @escaping([RMSensorAPI]?, _ error: String?) -> Void)` | The method retrieves a list of `RMSensorAPI`objects linked to a user. |


#### addSesnorToUser()

The method links a sensor to the user with the uuid given.

```swift
public func addSesnorToUser(tokenUser: String? = nil, sensor_name: String,
                             sensor_mac: String, ownership_type: String,
                             userUUID: String,
                             completion: @escaping(Int, String?, _ error: String?) -> Void)
```

##### Example

```swift
let networkManager = NetworkManager<RWSensorAPI>()
let sensorName = getWatchSensorName()
let userUuid = "fief-2dwd2-222dd"

networkManager.addSesnorToUser(sensor_name: sensorName,
                                sensor_mac: "",
                                 ownership_type: "owned", userUUID: userUuid) { (httpCode, response, error) in
    print(httpCode)
}
```

#### getUserSensor()

The method retrieves a list of `RMSensorAPI`objects linked to a user.

```swift
public func getUserSensor(userUUID: String, userToken: String? = nil, completion: @escaping**([RMSensorAPI]?, _ error: String?) -> Void)
```
##### Example

```swift
let networkManager = NetworkManager<RWSensorAPI>()
let userUuid = "fief-2dwd2-222dd"

networkManager.getUserSensor(userUUID: userUuid) { (userSensors, error) in
    print("sensors \(userSensors)")
}

```

### RWRealTimeApi

The extension includes all the request needed to start a remote class from apple watch

```swift
extension  RWRealTimeApi: EndPointType
```

| Function      | Description |
| ----------- | ----------- |
| `getRemoteRooms(userUUID: String, tokenUser: String? = nil, completion: @escaping ([RMRegisteredCenter]?, _ error: String?) -> Void)` | The method retrieves a list of `RMRegisteredCenter` objects which contains the information of the remote remotes. |
| `connectUserToClass(userUUID: String, classUUID: String, userToken: String? = nil, completion: @escaping(_ httpCode: Int, _ response : AddUserToRoomResponse? ,_ error: String?) -> Void)` | The method requests access to connect a user to a remote class. |
| `sendRealTimeData(to classUUID :String, realTimeData: RealTimeData, userToken: String? = nil, completion: @escaping(_ httpCode: Int, _ response: String?, _ error: String?) -> Void)` | The method sends a realtime data to a remote class. |
| `disconnectUserFromClass(with classUUID: String, userUUID: String, userToken: String)` | The method requests a disconnection from a remote class. |

#### getRemoteRooms()

The method retrieves a list of `RMRegisteredCenter` objects which contains the information of the remote remotes.

```swift
public func getRemoteRooms(userUUID: String, tokenUser: String? = nil, completion: @escaping ([RMRegisteredCenter]?, _ error: String?) -> Void)
```

##### Example

```swift
let networkManager = NetworkManager<RWRealTimeApi>()
let userUuid = "fief-2dwd2-222dd"

}
```

#### connectUserToClass()

The method requests access to connect a user to a remote class

```swift
public func connectUserToClass(userUUID: String, classUUID: String, userToken: String? = nil, completion: @escaping(_ httpCode: Int, _ response : AddUserToRoomResponse? ,_ error: String?) -> Void)
```

##### Example

```swift
let networkManager = NetworkManager<RWRealTimeApi>()
let userUuid = "fief-2dwd2-222dd"
let classUUID = "fief-2dwd2-222dd"

networkManager.connectUserToClass(userUUID: userUuid, classUUID: classUUID { (response, error) in
print("response \(resposne)")
}
```

#### sendRealTimeData()

The method sends a realtime data to a remote class.

```swift
public func sendRealTimeData(to classUUID :String, realTimeData: RealTimeData, userToken: String? = nil, completion: @escaping(_ httpCode: Int, _ response: String?, _ error: String?) -> Void)
```

##### Example

The method requests a disconnection from a remote class.

```swift
let networkManager = NetworkManager<RWRealTimeApi>()
let userUuid = "fief-2dwd2-222dd"
let classUUID = "fief-2dwd2-222dd"
let realTimeData = RealTimeData()

networkManager.sendRealTimeData(to: classUUID, realTimeData: realTimeData) { (httpCode, response, error) in
print("response \(response)")

}
```

#### disconnectUserFromClass()

```swift
public func disconnectUserFromClass(with classUUID: String, userUUID: String, userToken: String? = nil)
```

##### Example

```swift
let networkManager = NetworkManager<RWRealTimeApi>()
let userUuid = "fief-2dwd2-222dd"
let classUUID = "fisssf-2ssdwd2-222dd"

networkManager.disconnectUserFromClass(with: classUUID, userUUID: userUuid) 
```

### RWStorageManager class

```swift
public class RWStorageManager
```

This class can be used for the developer and for other functions in RM package,  the main purpose of this class is to store information to be consulted later on many situations.

* [User](#user-content-user-storage)
* [Sensor](#user-content-sensor-storage)
* [Training](#user-content-training-storage)
* [Training summaries](#user-content-training-summaries-storage)
* [Training update](#user-content-training-update)

### User storage

| Returns      | Function | Description |
| ----------- | ----------- | -------- |
| ```throws```  | ```storeUserInfo(user: RMUser) throws``` | Save a RMUser object in database if not exist and update the info if already exist, Throws an  `NSError`  if the transaction could not be written. |
| `Void` | `deleteUserInfo()` | Deletes the `RMUser` object stored in database. |
| `RMUser?` | `readUserInfo()` | Returns a `RMUser` object, If exists in data base. |
| `String?` | `getUserUUID()`| Returns the user's uuid, if there is a `RMUser` stored in database. |
| `String?` | `getUserToken()`| Returns the user's token, if there is a `RMUser` stored in database. |
|`String?` | `getUserPseudonym()` | Returns the user's pseudonym, if there is a  `RMUser` stored in database. |


#### storeUserInfo()
```swift
public func storeUserInfo(user: RMUser) throws
```
Save a RMUser object in database if not exist and update the info if already exist, Throws an  `NSError`  if the transaction could not be written.

##### Example
```swift
let storageManager = RMStorageManager()

let userToStore = RMUser()
userToStore.userUUID = "3nj3oi2i-1111-2222-3333-fii21"
userToStore.name  = "name"
userToStore.birthday  = "1999-09-09"
userToStore.lastName1 = ""
userToStore.lastName2 = ""
userToStore.sex = "M"
userToStore.email = ""
userToStore.phone = ""

userToStore.physiologicalVariables = RMUserPhysiologicalVariables()
userToStore.physiologicalVariables!.weight = "70"
userToStore.physiologicalVariables!.height = "190"
userToStore.physiologicalVariables!.restingHeartRate = "60"

do {
    try storageManager.storeUserInfo(user: userToStore)
} catch {
    print("Error", error)
}
```

#### deleteUserInfo()
```swift
public func deleteUserInfo()
```

Deletes the `RMUser` object stored in database.

##### Example
```swift
let storageManager = RMStorageManager()
storageManager.deleteUserInfo()
```

#### readUserInfo()
```swift
public func readUserInfo() -> RMUser?
```

Returns a `RMUser` object, If exists in data base.

##### Example
```swift
let storageManager = RMStorageManager()
guard let userInfo = storageManager.readUserInfo() else { return }
print(userInfo.name)
```

#### getUserUUID()
```swift
public func getUserUUID() -> String?
```

Returns the user's uuid, if there is a `RMUser` stored in database.

##### Example
```swift
let storageManager = RMStorageManager()
guard let userUUID = storageManager.getUserUUID() else { return }
print(userUUID)
```

#### getUserToken()
```swift
public func getUserToken() -> String?
```

Returns the user's token, if there is a `RMUser` stored in database.

##### Example
```swift
let storageManager = RMStorageManager()
guard let userToken = storageManager.getUserToken() else { return }
print(userToken)
```

### Sensor storage

| Returns      | Function | Description |
| ----------- | ----------- | -------- |
| `throws` | `storeSensor(sensor: RMSensorAPI)` | Adds or updates a `RMSensorAPI` object in data base. Throws an  `NSError`  if the transaction could not be written. |
| `void` | `deleteAllSensors()` | Removes all the `RMSensorAPI` objects stored in database. |
| `[RMSensorAPI]` | `readSensorsList()` | Retrieves a list of user's sensor stored. |
| `String` | `getSensorUUID(sensorName: String) -> String` | Returns the sensorUUID for the given name. If the sensor does not exist, it will return an empty string. |
| `[RMSensorAPI]` | `getSensorsWithoutUUID() -> [RMSensorAPI]` | Returns a list of stored sensors that do not contain UUIDs. |

#### storeSensor()

```swift
public func storeSensor(sensor: RMSensorAPI) throws
```
Adds or updates a `RMSensorAPI` object in data base. Throws an  `NSError`  if the transaction could not be written.

##### Example

```swift
let storageManager = RMStorageManager()

```

#### deleteAllSensor()

```swift
public func deleteAllSensors()
```
Removes all the `RMSensorAPI` objects stored in database.

##### Example

```swift
let storageManager = RMStorageManager()
storageManager.deleteAllSensor()
```

#### readSensorsList()

```swift
public func readSensorsList()
```
Retrieves a list of user's sensor stored.

##### Example

```swift
let storageManager = RMStorageManager()
let sensorList = storageManager.readSensorList()
print(sensorList)
```

#### getSensorUUID()

```swift
public func getSensorUUID(sensorName: String) -> String
```
Returns the sensorUUID for the given name. If the sensor does not exist, it will return an empty string.

##### Example

```swift
let storageManager = RMStorageManager()
let sensorUUID = storageManager.getSensorUUID(sensorName: "Rook iv2222")
print(sensorUUID)
```

#### getSensorsWithoutUUID()

```swift
public func getSensorsWithoutUUID() -> [RMSensorAPI]
```
Returns a list of stored sensors that do not contain UUIDs.

##### Example

```swift
let storageManager = RMStorageManager()
let sensorList = storageManager.getSensorsWithoutUUID()
print(sensorList)
```
### Training storage

| Returns      | Function | Description |
| ----------- | ----------- | -------- |
| `throws` | `storeTrainingtype(trainingType: RMTrainingType) throws` | Adds a RMTrainingType object in database, if the training exists, it will be updated. |
| `void` | `deleteAllTrainingTypes()` | Deletes All the RMTrainingType objects in the database. |
| `[RMTrainingType]` | `readTrainingTypesList()` | Retrieves the server's TrainingTypes list stored locally.  |
| `[RMTraininigInfo]` | `getPendingTrainings() -> [RMTrainingInfo]` | Retrieves a list of trainings that have not been uploaded to the server. |
| `[RMTrainingInfo]` | `getUnfinishedTraining()` | Retrieves a list of trainings that have not been finished. |

#### storeTrainingtype()
```swift
public func storeTrainingtype(trainingType: RMTrainingType)
```

Adds a RMTrainingType object in database, if the training exists, it will be updated.

##### Example
```swift

// Save training info
let storageManager = RMStorageManager()
let training = RMTrainingType()

do {
    try storageManager.storeTrainingType(trainingType: training)
} catch {
    print("Error while storing", error)
}

```

#### deleteAllTrainingTypes

```swift
public func deleteAllTrainingTypes()
```

Deletes All the RMTrainingType objects in the database.

##### Example

```swift
let storageManager = RMStorageManager()

storageManger.deleteAllTrainingTypes()

```

#### readTrainingTypesList

```swift
public func readTrainingTypesList() -> [RMTrainingType]
```

##### Example

```swift
let storageManager = RMStorageManager()

let trainingTypes = storageManager.readTrainingTypesList()
print(trainingTypes)

```

#### getPendingTrainings()

```swift
public  func  getPendingTrainings() -> [RMTrainingInfo]
```

Retrieves a list of trainings that have not been uploaded to the server.

##### Example

```swift
let storageManager = RMStoageManager()

let pendingTrainings = storageManager.getPendingTrainings()
print(pendingTrainings)

```

#### getUnfinishedTrainings()

```swift
public func getUnfinishedTrainings() -> [RMTrainingInfo]
```

Retrieves a list of trainings that have not been finished.

##### Example

```swift
let storageManager = RMStoageManager()

let unfinishedTrainings =storageManager.getUnfinishedTrainings()
print(unfinishedTrainings)

```

### Training summaries storage

| Returns      | Function | Description |
| ----------- | ----------- | -------- |
| `void` | `saveStepRecord(object: RMStepDataRecords)` | Adds a RMStepDataRecords object on database. |
| `[RMStepDerivedRecord]` | `getAllStepsRecords() -> [RMStepDerivedRecord]` | Returns an array of RMStepDerivedRecord objects stored on database. |
| `void` | `deleteAllStepsRecords()` | Deletes all the RMStepDataRecords stored on database. |
| `void` | `deleteSpecificStepRecord(object : Results<RMStepDataRecords>)` | Deletes the RMStepDataRecords object from database. |
| `void` | `saveHeartRateRecord(object : RMHeartRateDataRecords)` | Adds a RMHeartRateDataRecords object on database. |
|`RMHrDerivedRecord`| `getAllHeartRateRecords() -> [RMHrDerivedRecord]`| Returns an array of RMHrDerivedRecord objects stored on database. |
| `void` | `deleteAllHeartRateRecords` | Deletes all the RMHeartRateDataRecords stored on database. |
| `void` | `deleteSpecificHeartRateRecord(object : Results<RMHeartRateDataRecords>)` | Deletes the RMHeartRateDataRecords object from database. |
| `void` | `saveTrainingInfoRecord(object : RMTrainingInfo)` | Adds a RMTrainingInfo object on database. |
| `[RMTrainingInfo]` | `getAllTrainingInfoRecords() -> [RMTrainingInfo]` | Returns an array of RMTrainingInfo objects stored on database. |
| `void` | `deleteAllTrainingInfoRecords()` | Deletes all the RMTrainingInfo stored on database. |
| `void` | `deleteSpecificTrainingRecord(object : RMTrainingInfo)` | Deletes the RMTrainingInfo object from database. |

### Steps records

#### saveStepRecord()

```swift
public func saveStepRecord(object: RMStepDataRecords)
```

Adds a RMStepDataRecords object on database.

#### getAllStepsRecords()

```swift
public func getAllStepsRecords() -> [RMStepDerivedRecord]
```

Returns an array of RMStepDerivedRecord objects stored on database.

#### deleteAllStepsRecords()

```swift
public func deleteAllStepsRecords()
```

Deletes all the RMStepDataRecords stored on database.

#### deleteSpecificStepRecord()

```swift
public func deleteSpecificStepRecord(object : Results<RMStepDataRecords>)
```

Deletes the RMStepDataRecords object from database.

### Heart rate records

#### saveHeartRateRecord()

```swift
public func saveHeartRateRecord(object : RMHeartRateDataRecords)
```

Adds a RMHeartRateDataRecords object on database.

#### getAllHeartRateRecords()

```swift
public func getAllHeartRateRecords() -> [RMHrDerivedRecord]
```

Returns an array of RMHrDerivedRecord objects stored on database.

#### deleteAllHeartRateRecords()

```swift
public func deleteAllHeartRateRecords()
```

Deletes all the RMHeartRateDataRecords stored on database.

#### deleteSpecificHeartRateRecord()

```swift
public func deleteSpecificHeartRateRecord(object : Results<RMHeartRateDataRecords>)
```

Deletes the RMHeartRateDataRecords object from database.

### Training info records

#### saveTrainingInfoRecord()

```swift
public func saveTrainingInfoRecord(object : RMTrainingInfo)
```

Adds a RMTrainingInfo object on database.

#### getAllTrainingInfoRecords()

```swift
public func getAllTrainingInfoRecords() -> [RMTrainingInfo]
```

Returns an array of RMTrainingInfo objects stored on database.

#### deleteAllTrainingInfoRecords()

```swift
public func deleteAllTrainingInfoRecords()
```

Deletes all the RMTrainingInfo stored on database.

#### deleteSpecificTrainingInfoReference()

```swift
public func deleteSpecificTrainingInfoReference(object : ThreadSafeReference<RMTrainingInfo>)
```

Deletes the RMTrainingInfo object from database.

### Training update

| Returns      | Function | Description |
| ----------- | ----------- | --------- |
| `void` | `generateSummaries(summary: RMTrainingSummaries, _ heartRateRecordsData: RMHeartRateDataRecords? , _ stepsRecordsData: RMStepDataRecords?, time : Int)` | Updates the heart rate data and the steps data for the training summaries given. |
| `void` | `storeHrSummaries(summary : RMTrainingSummaries, record: RMHeartRateDataRecords, time: Int)` |  This method allows to update the summary records of  a training that corresponds to heart rate, if the heart rate values change, it can be updated. |
| `void` | `storeStepsSummaries(summary : RMTrainingSummaries, record: RMStepDataRecords, time: Int)` | This method allows to update the summary records of  a training that corresponds to steps.|
| `void` | `storeZonesSummaries(summary : RMTrainingSummaries, deltaTime: Float, _ delta_calories: Float, effort: Int, time: Int)` | This method updates the time and the calories burned in each zone. |
| `void` | `storeStepsZonesSummaries(summary : RMTrainingSummaries , delta_steps: Int , cadence: Float, cadenceElements: Int, effort: Int, time: Int)` | This method updates the steps taken in each zone. |
| `void` | `storeTrainingDuration(time: Int, summary : RMTrainingSummaries)`| Stores or updates the duration for a given summary of a training. |
| `void` | `addRecordForTraining(hrRecord: RMHeartRateDataRecords? = nil, stepRecord: RMStepDataRecords? = nil, _ training: RMTrainingInfo)` | Adds a RMHeartRateDataRecords and a RMStepDataRecords object in the given training |
| `void` | `updateTrainingInfo( _ stop: String  = "", sensorUUID: String? = nil, trainingTypeUUID: String? = nil, _ training: RMTrainingInfo)` | Updates a TrainingInfo object whit the sensorUUID, trainingTypeUUID or the stop date given. |
| `void` | `updateTrainingSummariesToSend(summaryElement : RMTrainingSummary, _ training: RMTrainingInfo)` | Updates the RMTrainingSummary object in the training given. |
| `void` | `updateTrainingAuxSummaries(_ training : RMTrainingInfo, auxSummary: RMTrainingAuxiliarSummary)` |Updates the auxiliary summaries of a training.|
|`void` | `updateTrainingSensorProperties(name: String?, sensorUUID: String?, training : RMTrainingInfo)` | Updates the properties of the sensor assigned to a training. |
| `void` | `updateTrainingUploadDate(for training : RMTrainingInfo)` | Updates the property uploadedAt of the RMTrainingInfo object given, the format of the string date is "yyyy-MM-dd HH:mm:ss". |

#### generateSummaries()

```swift
public  func  generateSummaries(summary: RMTrainingSummaries, _ heartRateRecordsData: RMHeartRateDataRecords? , _ stepsRecordsData: RMStepDataRecords?, time : Int)
```
Updates the heart rate data and the steps data for the training summaries given.

**Parameters**:
- summary: RMTrainingSummaries object that will be updated.
- heartRateRecordsData: RMHeartRateDataRecords object to store.
- stepsRecordsData: RMStepDataRecords object to store.

#### storeHrSummaries()

```swift
public func storeHrSummaries(summary : RMTrainingSummaries, record: RMHeartRateDataRecords, time: Int)
```

This method allows to update the summary records of  a training that corresponds to heart rate, if the heart rate values change, it can be updated.

**Parameters**:
-  summary: RMTrainingSummaries object
  - record:  RMHeartRateDataRecords


#### storeStepsSummaries()

```swift
public func storeStepsSummaries(summary : RMTrainingSummaries, record: RMStepDataRecords, time: Int)
```

This method allows to update the summary records of  a training that corresponds to steps.

**Parameters**:
- summary: RMTrainingSummaries object
- record: record the values of given RMStepsDerivedDataRecord

#### storeZonesSummaries

```swift
public func  storeZonesSummaries(summary : RMTrainingSummaries, deltaTime: Float, _ delta_calories: Float, effort: Int, time: Int)
```

This method updates the time and the calories burned in each zone.

**Parameters**:
- summary: RMTrainingSummaries object
- record: an array of Int that contains the five zones times


#### storeStepsZonesSummaries()

```swift
public func storeStepsZonesSummaries(summary : RMTrainingSummaries , delta_steps: Int , cadence: Float, cadenceElements: Int, effort: Int, time: Int)
```

This method updates the steps taken in each zone.

**Parameters**:
- summary: RMTrainingSummaries object
- record: an array of Int that contains the five zones times

#### storeTrainingDuration

```swift
public func storeTrainingDuration(time: Int, summary : RMTrainingSummaries)
```

Stores the training duration for a given summary, it can be updated

**Parameters**:
- time: the time to store
- summary: the summary where to update the time


#### addRecordForTraining

```swift
public func addRecordForTraining(hrRecord: RMHeartRateDataRecords? = nil, stepRecord: RMStepDataRecords? = nil, _ training: RMTrainingInfo)
```

Adds a RMHeartRateDataRecords and a RMStepDataRecords object in the given training

**Parameters**:
- hrRecord: The RMHeartRateDataRecords object to store
- stepRecord: The RMStepDataRecords object to store
- training: The RMTrainingInfo object that will be updated

#### updateTrainingInfo()

```swift
public func updateTrainingInfo( _ stop: String = "", sensorUUID: String? = nil, trainingTypeUUID: String? = nil, _ training: RMTrainingInfo)
```

Updates a TrainingInfo object whit the sensorUUID, trainingTypeUUID or the stop date given.

**Parameters**:

- stop: The string date when the training has finished with the following format yyyy-MM-dd HH:mm:ss
- sensorUUID: The string of the sensor UUID to change
- trainingTypeUUID: The string of the training type UUID to change
- training: The RMTrainingInfo object that will be updated


#### updateTrainingSummariesToSend()

```swift
public func updateTrainingSummariesToSend(summaryElement : RMTrainingSummary, _ training: RMTrainingInfo)
```
Updates the RMTrainingSummary object in the training given

**Parameters**:
- summaryElement: The RMTrainingSummary object that will be appended to the summary.
- training: The RMTrainingInfo object that will be updated

#### updateTrainingAuxSummaries()

```swift
public func updateTrainingAuxSummaries(_ training : RMTrainingInfo, auxSummary: RMTrainingAuxiliarSummary)
```

Updates the auxiliary summaries of a training.

**Parameters**:
- training: The RMTrainingInfo object that will be updated
- auxSummary: The RMTrainingAuxiliarSummary object that will be updated.

#### updateTrainingSensorProperties()

```swift
public func updateTrainingSensorProperties(name: String?, sensorUUID: String?, training : RMTrainingInfo)
```

Updates the properties of the sensor assigned to a training

**Parameters**:
- training: The RMTrainingInfo object that will be updated
- name: The string name of the sensor
- sensorUUID: The string UUID of the sensor

#### updateTrainingUploadDate()

```swift
public func updateTrainingUploadDate(for training : RMTrainingInfo)
```

Updates the property uploadedAt of the RMTrainingInfo object given, the format of the string date is "yyyy-MM-dd HH:mm:ss"

**Parameters**:
- training: The RMTrainingInfo object that will be updated

### BackGroundTasks

The class is used to execute some task in the back ground thread, all the task has a limit of time. This class conforms the singleton pattern.

```swift
public class BackGroundTasks: NSObject
```

| Returns | Function | Description |
| --------| -----------| ---------- |
| `RMResponse` | `uploadPendingTraining(completion: @escaping(RMResponse) -> Void)` | The method uploads all the trainings stored in the local data base returns a `RMResponse` object asynchronously. |

#### uploadPendingTraining()

You can call the method every time the user launch the app in order to upload all its trainings.

```swift
public func uploadPendingTraining(completion: **@escaping**(RMResponse) -> Void)
```

##### Example

```swift
BackGroundTasks.shared.uploadPendingTraining() { response in
    print ("Response: \(response)")
}
```


### RMModels

#### RMUser

```swift
public class RMUser: Object, Codable
```
The RMUser class is a realm model that conform the  Codable protocol, this model is used to store the information of a user

| Type | Name | Description |
| ------ | ------ | -------- |
| `Int` | id | primaryKey of the object it can not be changed. |
| `String?` | userUUID | The UUID of the user. |
| `String?` | token_user | This property is used to identify if the user is logger with rookmotion, if you use you own authentication method you can store your token in this property. |
| `String?` | name | Name of the user, it has to contain at least 4 characters. |
| `String?` | lastName | Last name of the user, it has to contain at least 4 characters. |
| `String?` | email | email of the user. |
| `String?` | pseudonym | nickname of the user |
| RMUserPhysiologicalVariables? | physiologicalVariables | RMUserPhysiologicalVariables object that contains the physiological variables of the user. |

#### updatePhysiologicalVariables()

```swift
public func updatePhysiologicalVariables(weight: Double, height: Double, restingHeartRate: Int)
```

Update the stored user physiologicalVariables.

**Parameters**:
- weight: value from 30 to 200
- height: value from 120 to 220
- restingHeartRate: value from 40 to 100

#### updateUserProperties()

```swift
public func updateUserProperties(name: String?,lastName1: String?, lastName2 : String?, phone: String?,birthday: String?, sex: String?)
```

Updates the user general information.

**Parameters**:
- name: The user name
- lastName1: the user last name
- lastName2: if the user has other name can be typed here
- phone: phone numer 8 to 12 digits
- birthday: format YYYY-MM-DD
- sex: "male" or "female"

#### RMUserPhysiologicalVariables

```swift
public class RMUserPhysiologicalVariables: Object, Codable
```

The RMUserPhysiologicalVariables class is a realm model that conform the  Codable protocol, this model is used to store the physiological variables of a user.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String` | `weight` | Weight of the user its value has to be from 30 to 200 |
| `String` | `height` | Height of the user its value has to be from 120 to 220 |
| `String` | `restingHeartRate` | Resting heart rate of the user its value from 40 to 100 |

#### RMTrainingType

```swift
public class RMTrainingType: Object, Codable
```

The RMTrainingType class is a realm model that conform the  Codable protocol, this model is used to store the training retrieved from the server.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String?` | `trainingTypeUUID` | The UUID of the training |
| `String?` | `trainigName` | The name of the training |
| `OptionalInt?` | `useHeartRate` | An object that indicates if the workout use heart rate |
| `OptionalInt?` | `useCycling` | An object that indicates if the workout use cycling |
| `OptionalInt?` | `useGps` | An object that indicates if the workout use gps |
| `OptionalInt?` | `useSteps` | An object that indicates if the workout use heart rate |

#### UseSteps

```swift
public class UseSteps: Object, Codable
```

The UseSteps model is used to store if a training use steps.

| Type | Name | Description |
| ------ | ------ | -------- |
| OptionalInt? | `enabled` | Optional Int that indicates if steps are enable |
| `String` | `stepsTypes` | Strings that indicates the type of steps. |

#### RMSensorAPI

```swift
public class RMSensorAPI: Object, Codable
```

This is model is used to store the sensors retrieved from the web service.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String?` |  `sensorName` | The name of the sensor |
| `String?` | `sensorUUID` | The UUID that identifies the sensor on the server |
| `String?` | `sensorMAC` | The mac of the sensor. |
| `String?` | `updatedAt` | Sensor update date with format YYYY-MM-dd. |
| `String?` | `ownershipType` | Indicates the ownership type. |

#### RWTrainingInfo

```swift
public class RWTrainingInfo: Object, Codable
```

RMTrainingInfo model is used to store the workout data, it can help to recover the information, if the app terminates.

| Type | Name | Description |
| ------ | ------ | -------- |
|`String?` | `start` | start date of the workout with the format "yyyy-MM-dd HH:mm:ss" |
|`String?` | `end` | end date of the workout with the format "yyyy-MM-dd HH:mm:ss"  |
|`String?` | `trainingTypeUUID` | The UUID of the training training type that will be performed. |
|`String?` | `sensorUUID` | The UUID of the sensor that is used in the workout. |
|`String?` | `sensorName` | The sensor name that is used in the workout. |
|`String?` | `deviceType` | The device where the workout was performed. |
|`String?` | `uploadedAt` | The uploaded date of the workout. |
|`Int` | `groupalMode` | Indicates if the training was performed in group. |
|`RMAuxiliarSummary??` | `auxSummary` | Object to store the auxiliary summaries of the workout.  |
|`RMTrainingSummaries?` | `summary` | Object to store the summary of the workout. |
|`RMTrainingStoragedRecords?` | `records` | Object to store the list of heart rate records and steps records |
| `RMRemoteClass?` | `remoteClass` | Object to store the properties of a remote training |
|`List<RMTrainingSummary>` | `summaries` | Object to store the summary id and its value |

#### RWAuxiliarSummary

```swift
public class RWAuxiliarSummary: Object
```
RMAuxiliarSummary model helps to store the number of samples ant its value accumulated

| Type | Name | Description |
| ------ | ------ | -------- |
| `Int` | `hrElements` | Number of heart rate samples. |
| `Int` | `hrAccumulated` | Value accumulated of heart rate samples. |
| `Int` | `effortElements` | Number of effort samples. |
| `Int` | `effortAccumulated` | Value accumulated of effort samples. |
| `Int` | `cadenceElements` | Number of cadence samples. |
| `Int` | `cadenceAccumulated` | Value accumulated of cadence samples. |

#### RWTrainingSummaries

```swift
public class RWTrainingSummaries: Object
```
This model contains the training summaries on realtime.

| Type | Name | Description |
| ------ | ------ | -------- |
| `Int` | `duration_time_tot` | Duration of the workout. |
| `Float` | `z1_time` | Time in the first zone. |
| `Float` | `z2_time` | Time in the second zone. |
| `Float` | `z3_time` | Time in the third zone. |
| `Float` | `z4_time` | Time in the fourth zone. |
| `Float` | `z5_time` | Time in the fifth zone. |
| `Int` | `hr_max` | Heart rate max value. |
| `Int` | `hr_min` | Heart rate min value. |
| `Int` | `hr_avg` | Heart rate average value. |
| `Int` | `effort_max` | effort max value. |
| `Int` | `effort_min` | effort min value. |
| `Int` | `effort_avg` | effort average value. |
| `Int` | `calories` | Total calories burned in training. |
| `Float` | `z1_calories_tot` | Total calories burned in the first zone. |
| `Float` | `z2_calories_tot` | Total calories burned in the second zone. |
| `Float` | `z3_calories_tot` | Total calories burned in the third zone. |
| `Float` | `z4_calories_tot` | Total calories burned in the fourth zone. |
| `Float` | `z5_calories_tot` | Total calories burned in the fifth zone. |
| `Int` | `steptsTotal` | Total steps taken in training. |
| `Int` | `z1_steps_tot` | Total steps taken in first zone. |
| `Int` | `z2_steps_tot` | Total steps taken in second zone. |
| `Int` | `z3_steps_tot` | Total steps taken in third zone. |
| `Int` | `z4_steps_tot` | Total steps taken in fourth zone. |
| `Int` | `z5_steps_tot` | Total steps taken in fifth zone. |
| `Int` | `cadence_max` | Cadence max value. |
| `Int` | `cadence_min` | Cadence min value. |
| `Int` | `cadence_avg` | Cadence average value. |
| `Int` | `z1_cadence_tot` | Cadence in the first zone. |
| `Int` | `z2_cadence_tot` | Cadence in the second zone. |
| `Int` | `z3_cadence_tot` | Cadence in the third zone. |
| `Int` | `z4_cadence_tot` | Cadence in the fourth zone. |
| `Int` | `z5_cadence_tot` | Cadence in the fifth zone. |

#### RWRemoteClass

```swift
public class RWRemoteClass: Object
```

This model stores the data of a remote class.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String` | `classUUID` | The UUID for the remote class |
| `String` | `roomUUID` | The UUID of the room |
| `String` | `trainingName` | The training name of the class |
| `Int` | `classDelay` | The period that the data will be send |
| `Int` | `useSteps` | Indicator if the training use step |
| `String` | `stepOptions` | Type of steps of the training |

#### RWTrainingStoragedRecords

```swift
public class RWTrainingStoragedRecords: Object, Codable
```

This model stores a list of the heart rate data and a list of the steps data.

| Type | Name | Description |
| ------ | ------ | -------- |
| `List<RMHeartRateDataRecords>` | `hrDerivedRecords` | List of heart rate data records. |
| `List<RMStepDataRecords>` | `stepsDerivedRecords` | List of steps data records. |

#### RWHeartRateDataRecords

```swift
public class RWHeartRateDataRecords: Object, Codable
```

This model contains the steps derived data that can be calculated on the  Equation class.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String` | `timestamp` | Sample date with format "yyyy-MM-dd HH:mm:ss". |
| `Int` | `heartRate` | Heart rate value. |
| `Float` | `calories` | Calories calculated. |
| `Float` | `effort` | Effort calculated. |
| `String` | `start` | Start date of the training with format "yyyy-MM-dd HH:mm:ss".  |
| `Float` | `heart_rate_variability` | Heart rate variability. |

#### RWStepDataRecords

```swift
public class RWStepDataRecords: Object, Codable
```

This model contains the steps derived data that can be calculated on the Equation class

| Type | Name | Description |
| ------ | ------ | -------- |
| `String` | `timestamp` | Sample date with format "yyyy-MM-dd HH:mm:ss". |
| `Int` | `steps` | Number of steps. |
| `Float` | `cadence` | Cadence calculated. |
| `String` | `start` | Start date of the training with format "yyyy-MM-dd HH:mm:ss".  |

#### RWTrainingSummary

```swift
public class RWTrainingSummary: Object, Codable
```

This model helps to store the summary id and its value.

| Type | Name | Description |
| ------ | ------ | -------- |
| `Int` | `summaryTypeID` | ID of the summary. |
| `Int` | `value` | value of the summary. |

#### RWHrDerivedRecord

```swift
public class RWHrDerivedRecord: Codable
```

This model contains the heart rate derived information from a sensor sample.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String?` | `timestamp` | Date and time of the sample. |
| `Int?` | `heartRate` | The heart rate sample bpm. |
| `Float?` | `calories` | The calories burned. |
| `Float?` | `effort` | The current effort. |
| `Int?` | `heartRateVariability` | The variability of heart rate sample.   |

#### RWStepDerivedRecord

``` swift
public class RMStepDerivedRecord: Codable
```
This model contains the steps derived data that can be calculated on the Equation class  cadence ,steps  and the  timestamp of this data.

| Type | Name | Description |
| ------ | ------ | -------- |
| `String?` | `timestamp` | Date and time of the sample. |
| `Float?` | `cadence` | The cadence of the sample |
| `Int?` | `steps` | The steps count. |

#### WorkoutType

The model contains the data for a workout. 

```swift
public struct WorkoutType
```

| Type | Name | Description |
| ------ | ------ | -------- |
| `String`| `uuid` | The uuid code of the workout type. |
| `String`| `name` | The name of the activity. |
| `Bool` | useSteps | Indicates if the workout has the step count enable |
| `String?`| `typeSteps | Indicates the type of steps or jumps. |

#### WorkoutConfiguration

Contains all the data to configure a workout session

```swift
public struct  WorkoutConfiguration
```

| Type | Name | Description |
| ----- | --- | ------- |
| `String` | `trainingTypeUUID` | The uuid of the workout type. |
| `Bool` | `useSteps` | Indicates if the step count is enable. |
| `HKWorkoutActivityType` | `getTypeTraining` | the workout activity type linked with the training uuid. |
| `HKWorkoutSessionLocationType` | `locationType` | Indicates if the activity is indoor or outdoor. |

#### RemoteClass

Contains all the data that is used in a remote class, the action are  connect, send information and disconnect .

| Type | Name | Description |
| ----- | --- | ------- |
| `Int` | `id` | The id linked to the remote class |
| `String` | `uuid` | The uuid linked to the remote class |
| `String` | `name` | The name of the remote class |
| `String` | `trainingType` | The activity name of the remote class |
| `String` | `trainingTypeUUID` | The uuid of the activity. |
| `String` | `configurationUUID` | The configuration uuid of the remote class |
| `Int` | `duration` | The number of seconds of the remote class |
| `Int` | `capacity` | The number of places for users. |
| `String` | `classDelay` | The amount of time between each sample is send. |
| `String` | `dataOrder` | Indicates how to order the participants |
| `Int` | `useSteps` | Indicates if the activity use steps |
| `String?` | `typeSteps` | Indicates the type of steps of jumps. |
| `Int` | `waitingTimeRemaining` | The remain time of the waiting room. |

#### RMResponse

Indicates the response of the request.

```swift
public struct RMResponse
```

| Type | Name | Description |
| ----- | --- | ------- |
| `String` | `code` | The httpCode of the request. |
| `String` | `message` | The message of the response. |
| `Bool` | `success` | Indicates if the request was successful. |

## RookMotion

This documentation is provided by **RookMotion** all rights reserved to Rookeries Development SRL de CV.

**contact** : contacto@rookmotion.com  

Startup México SUM Campus Ciudad de México  

+52 55 39406461



